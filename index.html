<!DOCTYPE html>
<html class="no-js" lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
    </head>
    <body>
        <script>
            //Запрос на токен
            // fetch('https://cors-anywhere.herokuapp.com/https://olgachfrontend.amocrm.ru/oauth2/access_token', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json',
            //         'Origin': 'https://olgachfrontend.amocrm.ru',},
            //     body: JSON.stringify({
            //         client_id: "36580453-1c14-4459-898e-0c7c339039eb",
            //         client_secret: "iH4Sqdyl5hT3MwK6uxH03ikQ1qMJbPP7M7yilGlozVo1it0T17Fw2VFAunZTkzyw",
            //         grant_type: "authorization_code",
            //         code: "def502002f06d41805a43143659a4b9bd29139fb46fdd76cdffc53ce95cd75af7862b93678b87ac4ac9361d318bcb89aa242d91c53689ee5d795c47a65ec00da5da2e84161e331cb0922f57a2a0961af2a7007b78fc83233b8c6a52561706a6c99a74002720d1d46b6168b9e2f5bd75399623d450c4ce76ee8af0fb3c4d9a2ea4a5289245344d2e1218d7fefdf36ec734588e96e66484b22748caec652772172b63789616dd517517ad89157f01e5622aa67d31625bb664504a99838846d7eae89b6ce7f05e90370bd665f353b1904369d37d34550a8ae946a08c814e77f28eef3aceb6765d26ec9c3a04edc5cc3374c60d712a9cf96f8bb3acef04a9e5dab36571726f57862e98b980114ce8024cca15ecb342928bded79b8dd8af1770d51eec51db6a9cfbec039eb8e1c5b55f7319f874703d2742d2875d2ba5be345c58dbda90b3f4b0fd40c5bfd4cc2ccb0f0813427935995705c828110d46c7093749ef459455c285dc500de7d7fd01456460778a7d0b6b494c26ed784965f21e63e693e1b73553d19d7833db740452a1b60f5efd610c55d22905137867ae86f74d3e7658b15f7420316307b2f18d2b9dbe5cf2214c14413c79203bdeca70e3d27341f7e2f8037a352d441c389a1777750b2aef0ef8f8a22447475619a59abea76af6c9e194d3b28f4ff81e3457018eb79b0cf7b2c846e8c0fe79f054f",
            //         redirect_uri: "https://randmpop.github.io/Test-deals/"
            //     })
            // })
            // .then(res => res.json())
            // .then(data => console.log('Успешно:', data))
            // .catch(error => console.error('Ошибка:', error));


            // fetch('https://cors-anywhere.herokuapp.com/https://olgachfrontend.amocrm.ru/api/v4/account')
            // .then(response => response.json())
            // .then(data => console.log(data))
            // .catch(error => console.error('Ошибка:', error));

            //Запрос на сделки
            const apiUrl = 'https://cors-anywhere.herokuapp.com/https://olgachfrontend.amocrm.ru/api/v4/leads';
            const accessToken = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjgzYzIwOWFjNjk1Y2RhYzNmN2NlNDczM2Y2OTJlYzA5MzE4NzdiM2MxZWRhZjk4MmYwNDlhNTk1ZWU3NzNjYzlmMzljMmYyM2U0OTIwNTc1In0.eyJhdWQiOiIzNjU4MDQ1My0xYzE0LTQ0NTktODk4ZS0wYzdjMzM5MDM5ZWIiLCJqdGkiOiI4M2MyMDlhYzY5NWNkYWMzZjdjZTQ3MzNmNjkyZWMwOTMxODc3YjNjMWVkYWY5ODJmMDQ5YTU5NWVlNzczY2M5ZjM5YzJmMjNlNDkyMDU3NSIsImlhdCI6MTc0MjI5ODg5OSwibmJmIjoxNzQyMjk4ODk5LCJleHAiOjE3NDIzODUyOTksInN1YiI6IjEyMjQ2OTM0IiwiZ3JhbnRfdHlwZSI6IiIsImFjY291bnRfaWQiOjMyMjkyNjIyLCJiYXNlX2RvbWFpbiI6ImFtb2NybS5ydSIsInZlcnNpb24iOjIsInNjb3BlcyI6WyJwdXNoX25vdGlmaWNhdGlvbnMiLCJmaWxlcyIsImNybSIsImZpbGVzX2RlbGV0ZSIsIm5vdGlmaWNhdGlvbnMiXSwiaGFzaF91dWlkIjoiMTIzYmQ1ODgtZDkzOC00MGQxLThlNjEtOTNiOGY1NzlkZmRlIiwiYXBpX2RvbWFpbiI6ImFwaS1iLmFtb2NybS5ydSJ9.EQZHjmui5JnWivwBzPIWsVa6yO-dWgifk5jdh-UTXTfTPvHqC3NabKng_gBkKNgSoybQeXsxwRVVyzfwFHZ7HoT53aEAzQRcsm2nZWuHcQGsnejRdieeWgbn3AroBxWJSFFIdrvKQzJSr_y772mygTmfdDFJm853R8ilY2_O5cJwgabqbMBI8c7F5ScuNxwEyPLE02hULO0NzecPStMeLUpBMirgdH8MhhGApywPpuzZZQR2CKHmUzrviRY8m5v8jWFFbCaa9gfkJqPT5FT5Y99C-KZidjjksvvm6b6RXhOvVEgMnkeh_H2FZZCgd7a9QXmRQ1s4iEkZKjliu8Ynuw';
            fetch(apiUrl, {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${accessToken}`,
                    'Content-Type': 'application/json',
                }
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Ошибка запроса: ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Ответ от API:', data);
                    const leadNameAll = document.querySelectorAll(".lead-name");
                    const leadBudgetAll = document.querySelectorAll(".lead-budget");
                    const leadIDAll = document.querySelectorAll(".lead-id");
                    for (let i = 0; i < 10; i++){
                        leadNameAll[i].textContent = data._embedded.leads[i].name;
                        leadBudgetAll[i].textContent = data._embedded.leads[i].price;
                        leadIDAll[i].textContent = data._embedded.leads[i].id;
                    }
                })
                .catch(error => {
                    console.error('Ошибка:', error);
                });

        // Пример, чтоб не сразу выводились результаты
        //     function fetchData() {
        //     const apiUrl = 'https://cors-anywhere.herokuapp.com/https://olgachfrontend.amocrm.ru/api/v4/leads';
        //     const accessToken = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjgzYzIwOWFjNjk1Y2RhYzNmN2NlNDczM2Y2OTJlYzA5MzE4NzdiM2MxZWRhZjk4MmYwNDlhNTk1ZWU3NzNjYzlmMzljMmYyM2U0OTIwNTc1In0.eyJhdWQiOiIzNjU4MDQ1My0xYzE0LTQ0NTktODk4ZS0wYzdjMzM5MDM5ZWIiLCJqdGkiOiI4M2MyMDlhYzY5NWNkYWMzZjdjZTQ3MzNmNjkyZWMwOTMxODc3YjNjMWVkYWY5ODJmMDQ5YTU5NWVlNzczY2M5ZjM5YzJmMjNlNDkyMDU3NSIsImlhdCI6MTc0MjI5ODg5OSwibmJmIjoxNzQyMjk4ODk5LCJleHAiOjE3NDIzODUyOTksInN1YiI6IjEyMjQ2OTM0IiwiZ3JhbnRfdHlwZSI6IiIsImFjY291bnRfaWQiOjMyMjkyNjIyLCJiYXNlX2RvbWFpbiI6ImFtb2NybS5ydSIsInZlcnNpb24iOjIsInNjb3BlcyI6WyJwdXNoX25vdGlmaWNhdGlvbnMiLCJmaWxlcyIsImNybSIsImZpbGVzX2RlbGV0ZSIsIm5vdGlmaWNhdGlvbnMiXSwiaGFzaF91dWlkIjoiMTIzYmQ1ODgtZDkzOC00MGQxLThlNjEtOTNiOGY1NzlkZmRlIiwiYXBpX2RvbWFpbiI6ImFwaS1iLmFtb2NybS5ydSJ9.EQZHjmui5JnWivwBzPIWsVa6yO-dWgifk5jdh-UTXTfTPvHqC3NabKng_gBkKNgSoybQeXsxwRVVyzfwFHZ7HoT53aEAzQRcsm2nZWuHcQGsnejRdieeWgbn3AroBxWJSFFIdrvKQzJSr_y772mygTmfdDFJm853R8ilY2_O5cJwgabqbMBI8c7F5ScuNxwEyPLE02hULO0NzecPStMeLUpBMirgdH8MhhGApywPpuzZZQR2CKHmUzrviRY8m5v8jWFFbCaa9gfkJqPT5FT5Y99C-KZidjjksvvm6b6RXhOvVEgMnkeh_H2FZZCgd7a9QXmRQ1s4iEkZKjliu8Ynuw';

        //     return fetch(apiUrl, {
        //         method: 'GET',
        //         headers: {
        //             'Authorization': `Bearer ${accessToken}`,
        //             'Content-Type': 'application/json',
        //         }
        //     })
        //         .then(response => {
        //             if (!response.ok) {
        //                 throw new Error('Ошибка запроса: ' + response.statusText);
        //             }
        //             return response.json();
        //         })
        // }

        // fetchData()
        //     .then(apiResponse => {
        //         console.log('Ответ от API:', apiResponse);
        //     })
        //     .catch(error => {
        //         console.error('Ошибка:', error);
        //     });                
        </script>
        <div class="leads lead1">
            <p class="lead-name"></p>
            <p class="lead-budget"></p>
            <p class="lead-id"></p>
        </div>
        <div class="leads lead2">
            <p class="lead-name"></p>
            <p class="lead-budget"></p>
            <p class="lead-id"></p>
        </div>
        <div class="leads lead3">
            <p class="lead-name"></p>
            <p class="lead-budget"></p>
            <p class="lead-id"></p>
        </div>
        <div class="leads lead4">
            <p class="lead-name"></p>
            <p class="lead-budget"></p>
            <p class="lead-id"></p>
        </div>
        <div class="leads lead5">
            <p class="lead-name"></p>
            <p class="lead-budget"></p>
            <p class="lead-id"></p>
        </div>
        <div class="leads lead6">
            <p class="lead-name"></p>
            <p class="lead-budget"></p>
            <p class="lead-id"></p>
        </div>
        <div class="leads lead7">
            <p class="lead-name"></p>
            <p class="lead-budget"></p>
            <p class="lead-id"></p>
        </div>
        <div class="leads lead8">
            <p class="lead-name"></p>
            <p class="lead-budget"></p>
            <p class="lead-id"></p>
        </div>
        <div class="leads lead9">
            <p class="lead-name"></p>
            <p class="lead-budget"></p>
            <p class="lead-id"></p>
        </div>
        <div class="leads lead10">
            <p class="lead-name"></p>
            <p class="lead-budget"></p>
            <p class="lead-id"></p>
        </div>
    </body>
</html>